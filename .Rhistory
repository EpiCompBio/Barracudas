using<-function(...) {
libs<-unlist(list(...))
req<-unlist(lapply(libs,require,character.only=TRUE))
need<-libs[req==FALSE]
if(length(need)>0){
install.packages(need)
lapply(need,require,character.only=TRUE)
}
}
using("FactoMineR")
setwd("C:/Users/JOE/Documents/Imperial College 2018-2019/Translational Data Science/Barracudas")
mydata=read.csv("../data/processed/UKBcompleteFeb19.csv")
source("C:/Users/JOE/Documents/R_utility_and_self_implementations/FAMD_plots_utility.R")
source("C:/Users/JOE/Documents/R_utility_and_self_implementations/colors_themes_utility.R")
#define obese BMI > 35
mydata$obese = ifelse(mydata$BMI >= 35, 1, 0)
#define outcome cols
outcomes = c('diabetes','mi','stroke','angina','obese')
outcome_cols = grep(paste0('^',outcomes,'$',collapse = '|'), colnames(mydata))
#col of chronic diseases
mydata$no_chronic = apply(mydata[,outcome_cols],1,sum)
#change gender levels and remove gender that is not used anymore
mydata$Sex = factor(ifelse(mydata$gender == 0, 'Female','Male'))
mydata$gender=NULL
#binary cols
binary_cols = which(unlist(sapply(mydata, function(x) length(levels(factor(x)))==2)))
mydata[,binary_cols]=lapply(mydata[,binary_cols],as.factor)
#re-organize columns
mydata=mydata %>% select(eid,mi,angina,stroke,htn,obese,no_chronic, everything())
#subset multi morbid rows
multi_morbid = mydata[which(mydata$no_chronic>1),]
for (k in 1:ncol(mydata)) {
if (class(mydata[,k])!="factor") {
mydata[,k]=scale(mydata[,k])
}
}
for (k in 1:ncol(multi_morbid)) {
if (class(multi_morbid[,k])!="factor") {
multi_morbid[,k]=scale(multi_morbid[,k])
}
}
using<-function(...) {
libs<-unlist(list(...))
req<-unlist(lapply(libs,require,character.only=TRUE))
need<-libs[req==FALSE]
if(length(need)>0){
install.packages(need)
lapply(need,require,character.only=TRUE)
}
}
using("FactoMineR","magrittr","reshape2","gridExtra","grid","dplyr","shadowtext")
using<-function(...) {
libs<-unlist(list(...))
req<-unlist(lapply(libs,require,character.only=TRUE))
need<-libs[req==FALSE]
if(length(need)>0){
install.packages(need)
lapply(need,require,character.only=TRUE)
}
}
using("reshape2","magrittr","gridExtra","grid","dplyr","shadowtext","gridExtra")
source("C:/Users/JOE/Documents/R_utility_and_self_implementations/FAMD_plots_utility.R")
source("C:/Users/JOE/Documents/R_utility_and_self_implementations/colors_themes_utility.R")
#define obese BMI > 35
mydata$obese = ifelse(mydata$BMI >= 35, 1, 0)
#define outcome cols
outcomes = c('diabetes','mi','stroke','angina','obese')
outcome_cols = grep(paste0('^',outcomes,'$',collapse = '|'), colnames(mydata))
#col of chronic diseases
mydata$no_chronic = apply(mydata[,outcome_cols],1,sum)
#change gender levels and remove gender that is not used anymore
mydata$Sex = factor(ifelse(mydata$gender == 0, 'Female','Male'))
mydata$gender=NULL
#binary cols
binary_cols = which(unlist(sapply(mydata, function(x) length(levels(factor(x)))==2)))
head(mydata)
mydata$obese = ifelse(mydata$BMI >= 35, 1, 0)
#define outcome cols
outcomes = c('diabetes','mi','stroke','angina','obese')
outcome_cols = grep(paste0('^',outcomes,'$',collapse = '|'), colnames(mydata))
outcome_cols
mydata$no_chronic = apply(mydata[,outcome_cols],1,sum)
mydata$Sex = factor(ifelse(mydata$gender == 0, 'Female','Male'))
mydata$gender=NULL
binary_cols = which(unlist(sapply(mydata, function(x) length(levels(factor(x)))==2)))
class(outcomes[,'obese'])
class(mydata[,'obese'])
class(mydata)
head(mydata[,'obese'])
head(mydata[,77])
class(mydata)
head(mydata[,63])
mydata[,'angina']
